<!DOCTYPE html>
<html>
<head>
    <title>PubMed Search Results</title>
    <link rel="stylesheet" type="text/css" href="{{ url_for('static', filename='style.css') }}">
    <script src="{{ url_for('static', filename='script.js') }}"></script>
</head>
<body>
    <h1>PubMed Search Results</h1>

    <ul>
        {% for article in article_details %}
        <li>
            <strong>PubMed ID:</strong> {{ article.pubmed_id }}<br>
            <strong>Title:</strong> {{ article.title }}<br>
            <button class="show-authors" data-pubmed-id="{{ article.pubmed_id }}">Show Authors</button>
            <div class="authors" id="authors-{{ article.pubmed_id }}"></div>
            <a href="{{ article.url }}">Look up here!!!</a>
        </li>
        {% endfor %}
    </ul>

    <div>
        <a href="{{ url_for('index') }}">Back to Search</a>
        {% if 'term' in request.form %}
        <a href="https://pubmed.ncbi.nlm.nih.gov/?term={{ request.form.term }}">Search All Results on NCBI</a>
        {% endif %}
    </div>

    <script>
        var showAuthorsButtons = document.getElementsByClassName('show-authors');
        for (var i = 0; i < showAuthorsButtons.length; i++) {
            showAuthorsButtons[i].addEventListener('click', function () {
                var pubmedId = this.getAttribute('data-pubmed-id');
                var authorsDiv = document.getElementById('authors-' + pubmedId);
                authorsDiv.style.display = authorsDiv.style.display === 'none' ? 'block' : 'none';
            });
        }
    </script>
</body>
</html>
